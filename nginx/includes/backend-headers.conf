# Backend Service Proxy Headers (Include File)
#
# This file contains standard HTTP headers forwarded to backend microservices.
#
# Usage:
#   location /api/v1/resource {
#       include includes/api-protection.conf;
#       proxy_pass http://backend_service;
#       include includes/backend-headers.conf;
#   }
#
# These headers provide backend services with:
# - Client identification (IP, forwarding chain)
# - Request context (protocol, host)
# - Authentication (JWT token, extracted user ID)

# Standard proxy headers
proxy_set_header Host $host;
proxy_set_header X-Real-IP $remote_addr;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header X-Forwarded-Proto $scheme;

# Forward JWT to backend for defense-in-depth validation
proxy_set_header Authorization $http_authorization;

# Forward extracted user ID (set by Token Validation Service via jwt-auth.conf)
proxy_set_header X-User-Id $jwt_user_id;
